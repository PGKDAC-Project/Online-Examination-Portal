{
	"info": {
		"_postman_id": "oep-api-collection",
		"name": "Online Examination Portal - Complete API Collection",
		"description": "Complete API collection for testing both Spring Boot and .NET Admin services",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"auth": {
		"type": "bearer",
		"bearer": [
			{
				"key": "token",
				"value": "{{jwt_token}}",
				"type": "string"
			}
		]
	},
	"variable": [
		{
			"key": "spring_base_url",
			"value": "http://localhost:8080/oep"
		},
		{
			"key": "admin_base_url",
			"value": "http://localhost:7097"
		},
		{
			"key": "jwt_token",
			"value": ""
		}
	],
	"item": [
		{
			"name": "1. Authentication",
			"item": [
				{
					"name": "Login - Admin",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 200) {",
									"    const response = pm.response.json();",
									"    pm.collectionVariables.set('jwt_token', response.jwtToken);",
									"    pm.test('Login successful', () => {",
									"        pm.expect(response.jwtToken).to.not.be.empty;",
									"    });",
									"} else {",
									"    pm.test('Login failed', () => {",
									"        pm.expect.fail('Login request failed with status: ' + pm.response.code);",
									"    });",
									"}"
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"email\": \"admin@oep.com\",\n  \"password\": \"password123\"\n}"
						},
						"url": {
							"raw": "{{spring_base_url}}/auth/signin",
							"host": ["{{spring_base_url}}"],
							"path": ["auth", "signin"]
						}
					}
				},
				{
					"name": "Login - Instructor",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"email\": \"john.instructor@oep.com\",\n  \"password\": \"password123\"\n}"
						},
						"url": {
							"raw": "{{spring_base_url}}/auth/signin",
							"host": ["{{spring_base_url}}"],
							"path": ["auth", "signin"]
						}
					}
				},
				{
					"name": "Login - Student",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"email\": \"alice.student@oep.com\",\n  \"password\": \"password123\"\n}"
						},
						"url": {
							"raw": "{{spring_base_url}}/auth/signin",
							"host": ["{{spring_base_url}}"],
							"path": ["auth", "signin"]
						}
					}
				}
			]
		},
		{
			"name": "2. Spring Boot - Admin APIs",
			"item": [
				{
					"name": "Get All Users",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{jwt_token}}"
							}
						],
						"url": {
							"raw": "{{spring_base_url}}/admin/users",
							"host": ["{{spring_base_url}}"],
							"path": ["admin", "users"]
						}
					}
				},
				{
					"name": "Get User by ID",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{jwt_token}}"
							}
						],
						"url": {
							"raw": "{{spring_base_url}}/admin/users/2",
							"host": ["{{spring_base_url}}"],
							"path": ["admin", "users", "2"]
						}
					}
				},
				{
					"name": "Create User",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{jwt_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"userName\": \"Test User\",\n  \"userCode\": \"TST001\",\n  \"email\": \"test.user@oep.com\",\n  \"password\": \"password123\",\n  \"phoneNumber\": \"9876543299\",\n  \"role\": \"ROLE_STUDENT\",\n  \"batchId\": 1\n}"
						},
						"url": {
							"raw": "{{spring_base_url}}/admin/users",
							"host": ["{{spring_base_url}}"],
							"path": ["admin", "users"]
						}
					}
				},
				{
					"name": "Update User",
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{jwt_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"userName\": \"Updated Test User\",\n  \"userCode\": \"TST001\",\n  \"email\": \"test.user@oep.com\",\n  \"phoneNumber\": \"9876543299\",\n  \"role\": \"ROLE_STUDENT\",\n  \"batchId\": 1\n}"
						},
						"url": {
							"raw": "{{spring_base_url}}/admin/users/7",
							"host": ["{{spring_base_url}}"],
							"path": ["admin", "users", "7"]
						}
					}
				},
				{
					"name": "Get All Courses",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{jwt_token}}"
							}
						],
						"url": {
							"raw": "{{spring_base_url}}/admin/courses",
							"host": ["{{spring_base_url}}"],
							"path": ["admin", "courses"]
						}
					}
				},
				{
					"name": "Create Course",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{jwt_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"courseCode\": \"CS301\",\n  \"title\": \"Advanced Programming\",\n  \"description\": \"Advanced programming concepts and design patterns\",\n  \"instructorId\": 2\n}"
						},
						"url": {
							"raw": "{{spring_base_url}}/admin/courses",
							"host": ["{{spring_base_url}}"],
							"path": ["admin", "courses"]
						}
					}
				},
				{
					"name": "Update Course Status",
					"request": {
						"method": "PATCH",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{jwt_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "\"ACTIVE\""
						},
						"url": {
							"raw": "{{spring_base_url}}/admin/courses/4/status",
							"host": ["{{spring_base_url}}"],
							"path": ["admin", "courses", "4", "status"]
						}
					}
				}
			]
		},
		{
			"name": "3. Spring Boot - Instructor APIs",
			"item": [
				{
					"name": "Get Instructor Courses",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{jwt_token}}"
							}
						],
						"url": {
							"raw": "{{spring_base_url}}/instructor/courses",
							"host": ["{{spring_base_url}}"],
							"path": ["instructor", "courses"]
						}
					}
				},
				{
					"name": "Get Course Details",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{jwt_token}}"
							}
						],
						"url": {
							"raw": "{{spring_base_url}}/instructor/courses/1",
							"host": ["{{spring_base_url}}"],
							"path": ["instructor", "courses", "1"]
						}
					}
				}
			]
		},
		{
			"name": "4. Spring Boot - Student APIs",
			"item": [
				{
					"name": "Get Student Courses",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{jwt_token}}"
							}
						],
						"url": {
							"raw": "{{spring_base_url}}/student/courses",
							"host": ["{{spring_base_url}}"],
							"path": ["student", "courses"]
						}
					}
				}
			]
		},
		{
			"name": "5. .NET Admin Service - Batch APIs",
			"item": [
				{
					"name": "Get All Batches",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{jwt_token}}"
							}
						],
						"url": {
							"raw": "{{admin_base_url}}/admin/batches",
							"host": ["{{admin_base_url}}"],
							"path": ["admin", "batches"]
						}
					}
				},
				{
					"name": "Create Batch",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{jwt_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"batchName\": \"PG-DAC June 2024\",\n  \"description\": \"Post Graduate Diploma in Advanced Computing - June 2024 batch\",\n  \"startDate\": \"2024-06-01T00:00:00\",\n  \"endDate\": \"2024-11-30T00:00:00\"\n}"
						},
						"url": {
							"raw": "{{admin_base_url}}/admin/batches",
							"host": ["{{admin_base_url}}"],
							"path": ["admin", "batches"]
						}
					}
				},
				{
					"name": "Update Batch",
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{jwt_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"batchName\": \"PG-DAC June 2024 Updated\",\n  \"description\": \"Updated batch description\",\n  \"startDate\": \"2024-06-01T00:00:00\",\n  \"endDate\": \"2024-11-30T00:00:00\"\n}"
						},
						"url": {
							"raw": "{{admin_base_url}}/admin/batches/4",
							"host": ["{{admin_base_url}}"],
							"path": ["admin", "batches", "4"]
						}
					}
				}
			]
		},
		{
			"name": "6. .NET Admin Service - Announcement APIs",
			"item": [
				{
					"name": "Get All Announcements",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{jwt_token}}"
							}
						],
						"url": {
							"raw": "{{admin_base_url}}/admin/announcements",
							"host": ["{{admin_base_url}}"],
							"path": ["admin", "announcements"]
						}
					}
				},
				{
					"name": "Create Announcement",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{jwt_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"title\": \"Test Announcement\",\n  \"description\": \"This is a test announcement created via API\",\n  \"createdByEmail\": \"admin@oep.com\",\n  \"createdByRole\": \"ROLE_ADMIN\",\n  \"targetRole\": \"ROLE_STUDENT\",\n  \"targetBatch\": \"All\",\n  \"expiresAt\": \"2024-12-31T23:59:59\"\n}"
						},
						"url": {
							"raw": "{{admin_base_url}}/admin/announcements",
							"host": ["{{admin_base_url}}"],
							"path": ["admin", "announcements"]
						}
					}
				}
			]
		},
		{
			"name": "7. .NET Admin Service - User Management",
			"item": [
				{
					"name": "Get All Users (Admin Service)",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{jwt_token}}"
							}
						],
						"url": {
							"raw": "{{admin_base_url}}/admin/users",
							"host": ["{{admin_base_url}}"],
							"path": ["admin", "users"]
						}
					}
				},
				{
					"name": "Create User (Admin Service)",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{jwt_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"name\": \"Admin Test User\",\n  \"email\": \"admin.test@oep.com\",\n  \"password\": \"password123\",\n  \"role\": \"ROLE_INSTRUCTOR\",\n  \"status\": \"ACTIVE\",\n  \"batchId\": 1,\n  \"joinDate\": \"2024-01-27\"\n}"
						},
						"url": {
							"raw": "{{admin_base_url}}/admin/users",
							"host": ["{{admin_base_url}}"],
							"path": ["admin", "users"]
						}
					}
				}
			]
		},
		{
			"name": "8. .NET Admin Service - System Settings",
			"item": [
				{
					"name": "Get System Settings",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{jwt_token}}"
							}
						],
						"url": {
							"raw": "{{admin_base_url}}/admin/system-settings",
							"host": ["{{admin_base_url}}"],
							"path": ["admin", "system-settings"]
						}
					}
				},
				{
					"name": "Update System Settings",
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{jwt_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"maintenanceMode\": false,\n  \"tabSwitchDetection\": true,\n  \"fullscreenEnforcement\": true,\n  \"examAutoSubmit\": true\n}"
						},
						"url": {
							"raw": "{{admin_base_url}}/admin/system-settings",
							"host": ["{{admin_base_url}}"],
							"path": ["admin", "system-settings"]
						}
					}
				}
			]
		},
		{
			"name": "9. .NET Admin Service - Audit Logs",
			"item": [
				{
					"name": "Get Audit Logs",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{jwt_token}}"
							}
						],
						"url": {
							"raw": "{{admin_base_url}}/admin/logs",
							"host": ["{{admin_base_url}}"],
							"path": ["admin", "logs"]
						}
					}
				}
			]
		},
		{
			"name": "10. Health Checks",
			"item": [
				{
					"name": "Spring Boot Health",
					"request": {
						"method": "GET",
						"url": {
							"raw": "{{spring_base_url}}/actuator/health",
							"host": ["{{spring_base_url}}"],
							"path": ["actuator", "health"]
						}
					}
				},
				{
					"name": ".NET Admin Health",
					"request": {
						"method": "GET",
						"url": {
							"raw": "{{admin_base_url}}/health",
							"host": ["{{admin_base_url}}"],
							"path": ["health"]
						}
					}
				}
			]
		}
	]
}